{"version":3,"sources":["FindOriginResult.js"],"names":[],"mappings":"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","file":"FindOriginResult-compiled.js","sourcesContent":["/**\n * Created by cvtt on 2017/3/27.\n */\n/**\n * Created by cvtt on 2017/3/20.\n */\n\nimport React, { Component } from 'react'\nimport './css/Find.css'\nimport service from '../services/movieService.js'\nimport {RecomData} from '../recomConent/data/recom.js'\nclass RecomConent extends Component {\n    constructor(props) {\n        super(props)\n        this.state={\n            isLoading:true,\n            datamessage:{},\n            detailData:[],\n            lastOrgId:'',\n            response:false,\n            messages:{\n                keyword: '',\n                industryId: '',\n                region: '',\n                count:20,\n                beginOrgId:0\n            }\n        }\n    }\n    componentWillMount(){\n        document.title = '搜索结果'\n    }\n    componentDidMount(){\n        let strMessages =  JSON.parse(this.props.params.strMessage)\n        console.log(strMessages)\n        this.fetch(strMessages)\n    }\n\n    componentDidUpdate(){ //检测到state 和 props 变化就执行\n        if(this.refs.scroll_container){\n            this.addEventListener()\n        }\n    }\n\n    getLianDataCard =(Portrait,Id,RelationType,Type,ShortName,FullName,ContactName,Email,IndustryList,NetFlag,Th)=>{\n        var Iosmess = Object.assign({},this.state.Ios)\n        Iosmess.orgId = Id\n        Iosmess.orgType = Type\n        Iosmess.orgShortName = ShortName\n        Iosmess.orgPortrait = Portrait\n        var Strmess = JSON.stringify(Iosmess)\n        if(NetFlag == '1'){ // 1 : 表示跳转联网站\n            var uuu = navigator.userAgent;\n            var isAndroid=uuu.indexOf('Android') > -1 || uuu.indexOf('Linux') > -1;\n            var isIos=!!uuu.match(/\\(i[^;]+;( U;)? CPU.+Mac OS X/)==true;\n            if(isIos) {\n                window.webkit && window.webkit.messageHandlers.gotoWebsite.postMessage(Strmess)\n                return\n            }else if(isAndroid){\n\n                return  window.androidJsInterface && window.androidJsInterface.lianWebMainActivityLauncher(ShortName,Portrait,Id,RelationType,Type)\n            }\n        }else if(NetFlag == '0' ){ // 0 表示跳转组织明信片\n\n            var uuu = navigator.userAgent;\n            var isAndroid=uuu.indexOf('Android') > -1 || uuu.indexOf('Linux') > -1;\n            var isIos=!!uuu.match(/\\(i[^;]+;( U;)? CPU.+Mac OS X/)==true;\n            if(isIos) {\n\n                window.webkit && window.webkit.messageHandlers.gotoOrgDetail.postMessage(Strmess)\n                return\n            }else if(isAndroid){\n                return   window.androidJsInterface && window.androidJsInterface.intationOrgCardActivityLauncher(Portrait,Id,Type,ShortName,FullName,ContactName,Email,JSON.stringify(IndustryList))\n\n            }\n        }\n    }\n    addEventListener=()=>{\n        const _this=this\n        this.refs.scroll_container.addEventListener('scroll',(e)=>{\n            e.stopPropagation\n            if(e.target.scrollHeight <=e.target.scrollTop + e.target.offsetHeight){\n                if(_this.state.isButton){\n                    return\n                }\n                // 在发送请求之前将上一次的 orgId 回传\n                if(this.state.datamessage.flag ==1){\n                    return\n                }\n\n                _this.fetch(this.state.messages,this.state.lastOrgId)\n                _this.setState({isButton:true})\n            }\n        })\n    }\n    fetch = (messages,beginOrgId) => {\n\n        var _this = this // 保存全局 this\n        let message = Object.assign({}, messages)\n        message.beginOrgId = this.state.lastOrgId && beginOrgId\n        let detailData = [].concat(this.state.detailData)\n        let strMessage  = JSON.stringify(message)\n        const promise = service.getSearchResult(strMessage)\n        promise.then((json) => { // 获取到数据遮罩去掉\n            if(json ==''){\n                this.setState({response:true,isLoading:false})\n                return\n            }\n            json = JSON.parse(json) || RecomData\n            _this.setState({datamessage: json})\n            _this.setState({lastOrgId: json.lastOrgId})\n            if (detailData.length > 0) {\n                detailData = detailData.concat(json.orgList)\n            } else {\n                detailData = json.orgList\n            }\n            // 获取到数据之后 去掉遮罩 ，加载数据提示去掉\n            _this.setState({ // 同步还是异步\n                isLoading: false,\n                detailData: detailData,\n                messages: message,\n            })\n        }),reason =>{\n            console.log(reason)\n        }\n    }\n\n    handleOrign =()=>{\n        return(\n            <div className='FindOriginnoneOrgin'>\n                <div className='FindOriginnoneOrginImage' ref=\"scroll_container\">\n                    <img src={require('../images/empty.png')} alt=\"\"/>\n                    <span>暂无搜索结果</span>\n                </div>\n            </div>\n        )\n    }\n    // 渲染数据方法中\n    handelRender =(item)=>{\n        if(item.orgPortrait == null ){\n            var orgPortrait = require('../images/originImage.png')\n        }else {\n            orgPortrait = item.orgPortrait\n        }\n\n        return(\n            <div className='findComponent' key={item && item.orgId } onClick={this.getLianDataCard.bind(this,item.orgPortrait,item.orgId,item.orgRelationType,item.orgType,item.orgShortName,item.orgFullName,'','',item.orgIndustry,item.orgNetFlag)}>\n                <div className='componentImage' style={{background:'url('+orgPortrait+') no-repeat center center',backgroundSize:'3.33rem 3.33rem'}}></div>\n                <span>{item.orgShortName}</span>\n                <div className='address'>{item.officeAddressName}</div>\n                <b></b>\n                <div className='classBorder'></div>\n            </div>\n        )\n    }\n    handleRecomContent =()=>{\n        return (\n            <div className = 'findeResult' ref=\"scroll_container\">\n                {this.state.detailData.map(this.handelRender)}\n            </div>\n        )\n    }\n    render() { // isloading ：数据没有获取到之前 显示数据加载，\n\n        if(this.state.response ){\n            return this.handleOrign()\n        }\n        return this.handleRecomContent()\n    }\n}\nexport default RecomConent"]}